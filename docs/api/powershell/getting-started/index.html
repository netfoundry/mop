
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../../../images/fav.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1, mkdocs-material-4.6.3" name="generator"/>
<title>Getting Started - QuickStart Guides</title>
<link href="../../../assets/stylesheets/application.adb8469c.css" rel="stylesheet"/>
<script src="../../../assets/javascripts/modernizr.86422ebf.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
<link href="../../../assets/fonts/material-icons.css" rel="stylesheet"/>
<link href="../../../extra.css" rel="stylesheet"/>
</head>
<body dir="ltr">
<svg class="md-svg">
<defs>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->
<!-- Application header -->
<header class="md-header" data-md-component="header">
<!-- Top-level navigation -->
<nav class="md-header-nav md-grid">
<div class="md-flex">
<!-- Link to home -->
<div class="md-flex__cell md-flex__cell--shrink">
<a aria-label="QuickStart Guides" class="md-header-nav__button md-logo" href="../../.." title="QuickStart Guides">
<img alt="logo" height="24" src="../../../images/wide_logo.png" width="24"/>
</a>
</div>
<!-- Button to toggle drawer -->
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<!-- Header title -->
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
                QuickStart Guides
              </span>
<span class="md-header-nav__topic">
                
                  Getting Started
                
              </span>
</div>
<span class="md-footer-meta md-typeset">
<div class="md-footer-social">
<link href="../../../assets/fonts/font-awesome.css" rel="stylesheet"/>
<a class="md-footer-social__link fa fa-github" href="https://github.com/netfoundry" rel="noopener" target="_blank" title="github"></a>
<a class="md-footer-social__link fa fa-twitter" href="https://twitter.com/netfoundry" rel="noopener" target="_blank" title="twitter"></a>
<a class="md-footer-social__link fa fa-linkedin" href="https://linkedin.com/company/netfoundry" rel="noopener" target="_blank" title="linkedin"></a>
</div>
</span>
</div>
<!-- Button to open search dialogue -->
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<!-- Search interface -->
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-icon md-search__icon" for="__search"></label>
<button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
        
      </button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
            Type to start searching
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Repository containing source -->
</div>
</nav>
</header>
<div class="md-container">
<nav class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
        Home
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../netfoundry/intro/">
          NetFoundry Basics
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../aws/intro/">
          Cloud Providers
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../hypervisor/overview/">
          HyperVisors
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../overview/">
          API
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" role="main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="../../.." title="QuickStart Guides">
<img alt="logo" height="48" src="../../../images/wide_logo.png" width="48"/>
</a>
    QuickStart Guides
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../.." title="Home">
      Home
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      NetFoundry Basics
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-2">
        NetFoundry Basics
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../netfoundry/intro/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../netfoundry/fabric/" title="NF Fabric">
      NF Fabric
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../netfoundry/client/" title="NF Clients">
      NF Clients
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../netfoundry/gateway/" title="NF Gateways">
      NF Gateways
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Cloud Providers
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-3">
        Cloud Providers
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" id="nav-3-1" type="checkbox"/>
<label class="md-nav__link" for="nav-3-1">
      AWS
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-3-1">
        AWS
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../aws/intro/" title="Use Case Overview">
      Use Case Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../aws/aws-bastion/" title="Bastion Replacement Removal">
      Bastion Replacement Removal
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" id="nav-3-2" type="checkbox"/>
<label class="md-nav__link" for="nav-3-2">
      Azure
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-3-2">
        Azure
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/intro/" title="Use Cases Overview">
      Use Cases Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/accessing-azure-stack/" title="Accessing Azure Stack">
      Accessing Azure Stack
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/azure-bastion/" title="Bastion Replacement Removal">
      Bastion Replacement Removal
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/connectApp2App/" title="Branch Application To Cloud Application Connectivity">
      Branch Application To Cloud Application Connectivity
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/connectUser2App/" title="Mobile User To Cloud Application Connectivity">
      Mobile User To Cloud Application Connectivity
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../azure/o365-optimization/" title="MS Office 365 Optimize">
      MS Office 365 Optimize
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" id="nav-3-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3-3">
      GCP
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-3-3">
        GCP
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../gcp/intro/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../gcp/getting-started/" title="Getting Started Guide">
      Getting Started Guide
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" id="nav-3-4" type="checkbox"/>
<label class="md-nav__link" for="nav-3-4">
      AliCloud
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-3-4">
        AliCloud
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../alicloud/intro/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../alicloud/getting-started/" title="Getting Started Guide">
      Getting Started Guide
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../alicloud/user-guild/" title="User Guide">
      User Guide
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" id="nav-3-5" type="checkbox"/>
<label class="md-nav__link" for="nav-3-5">
      VCPE
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-3-5">
        VCPE
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../vcpe/intro/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../vcpe/cpe-automation/" title="CPE Automation">
      CPE Automation
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      HyperVisors
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-4">
        HyperVisors
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hypervisor/overview/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" id="nav-4-2" type="checkbox"/>
<label class="md-nav__link" for="nav-4-2">
      Hyper-V
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-4-2">
        Hyper-V
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hypervisor/hyper-v/getting-started/" title="Getting Started">
      Getting Started
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" id="nav-4-3" type="checkbox"/>
<label class="md-nav__link" for="nav-4-3">
      KVM
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-4-3">
        KVM
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hypervisor/kvm/getting-started/" title="Getting Started">
      Getting Started
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" id="nav-4-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4-4">
      VMware
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-4-4">
        VMware
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hypervisor/vmware/getting-started/" title="Getting Started">
      Getting Started
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" id="nav-4-5" type="checkbox"/>
<label class="md-nav__link" for="nav-4-5">
      VirtualBox
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-4-5">
        VirtualBox
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hypervisor/virtualbox/getting-started/" title="Getting Started">
      Getting Started
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/>
<label class="md-nav__link" for="nav-5">
      API
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-5">
        API
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" id="nav-5-2" type="checkbox"/>
<label class="md-nav__link" for="nav-5-2">
      Powershell
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-5-2">
        Powershell
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/" title="Overview">
      Overview
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<a class="md-nav__link md-nav__link--active" href="./" title="Getting Started">
      Getting Started
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" id="nav-5-3" type="checkbox"/>
<label class="md-nav__link" for="nav-5-3">
      Python
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-5-3">
        Python
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../python/overview/" title="Overview">
      Overview
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" id="nav-5-4" type="checkbox"/>
<label class="md-nav__link" for="nav-5-4">
      Bash
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="2">
<label class="md-nav__title" for="nav-5-4">
        Bash
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../bash/overview/" title="Overview">
      Overview
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset"><a class="md-icon md-content__icon" download href="getting-started.pdf" title="PDF Export"></a>
<h1>Getting Started</h1>
<p>This section provides the powershell code to spin up a NF client with the name as computer name fetched by PS script.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<ol>
<li>Here are the parameters used in the script few needs to be changed to suit your need for eg. network_name and region_ name.
<div class="highlight"><pre><span></span><code><span class="nt">clientId /secret</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">from NF console steps below.</span>
<span class="nt">environment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Production</span>
<span class="nt">network_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">e.g. DemoNet01</span>
<span class="nt">audience</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">URI for the Auth0</span>
<span class="nt">api_endpoint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">URI for the API calls</span>
<span class="nt">region_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">The region_name is the reference region or location where client will be created</span>
            <span class="l l-Scalar l-Scalar-Plain">(reference closest AWS location) e.g.us-east-1</span>
<span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AWS</span>
</code></pre></div></li>
<li>To create a unique client we can use second half of computer name below powershell cmdlet will fetch the same.
<div class="highlight"><pre><span></span><code><span class="c">#Set Endpoint name to second half of computer name:</span>
<span class="nv">$endpoint_name</span> <span class="p">=</span> <span class="nv">$ENV:COMPUTERNAME</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="s2">"-"</span><span class="p">)[-</span><span class="n">1</span><span class="p">]</span>
</code></pre></div></li>
<li>This section creates an access token by an api call using parameters defined earlier.
<div class="highlight"><pre><span></span><code><span class="c"># Get a auth token from Auth0</span>
<span class="nv">$auth_payload</span> <span class="p">=</span> <span class="p">@{</span>
    <span class="n">client_id</span><span class="p">=</span><span class="nv">$client_id</span>
    <span class="n">client_secret</span><span class="p">=</span><span class="nv">$client_secret</span>
    <span class="n">audience</span><span class="p">=</span><span class="nv">$audience</span>
    <span class="n">grant_type</span><span class="p">=</span><span class="s1">'client_credentials'</span>
<span class="p">}</span>
<span class="nv">$auth_json</span> <span class="p">=</span> <span class="nv">$auth_payload</span> <span class="p">|</span> <span class="nb">ConvertTo-Json</span>

<span class="nv">$post_uri</span> <span class="p">=</span>  <span class="s2">"https://netfoundry-"</span> <span class="p">+</span> <span class="nv">$environment</span> <span class="p">+</span> <span class="s2">".auth0.com/oauth/token"</span>

<span class="nv">$auth0_response</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Method</span> <span class="n">Post</span> <span class="n">-Uri</span> <span class="nv">$post_uri</span> <span class="n">-ContentType</span> <span class="s1">'application/json'</span> <span class="n">-Body</span> <span class="nv">$auth_json</span>

<span class="nv">$token</span> <span class="p">=</span> <span class="nv">$auth0_response</span><span class="p">.</span><span class="n">access_token</span>

<span class="c">#Inserting auth token to headers for API calls</span>
<span class="nv">$headers</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="s2">"System.Collections.Generic.Dictionary[[String],[String]]"</span>
<span class="nv">$headers</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s2">"Authorization"</span><span class="p">,</span> <span class="p">(</span><span class="s2">"Bearer "</span> <span class="p">+</span> <span class="nv">$token</span><span class="p">))</span>
</code></pre></div></li>
<li>This is how to get datacenterId and networkId which basically makes an API call to strips off unwanted information.
This information will be used to create client later.
<div class="highlight"><pre><span></span><code><span class="c"># Get a dataCenter ID:</span>

<span class="nv">$datacenter_uri</span> <span class="p">=</span> <span class="nv">$api_endpoint</span> <span class="p">+</span> <span class="s2">"/dataCenters"</span>

<span class="nv">$dataCenter_response</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Method</span> <span class="n">Get</span> <span class="n">-Uri</span> <span class="nv">$datacenter_uri</span> <span class="n">-ContentType</span> <span class="s1">'application/json'</span> <span class="n">-Headers</span> <span class="nv">$headers</span>

<span class="nv">$dataCenter</span> <span class="p">=</span> <span class="nv">$dataCenter_response</span><span class="p">.</span><span class="n">_embedded</span><span class="p">.</span><span class="n">dataCenters</span> <span class="p">|</span> <span class="nb">where </span><span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="n">locationCode</span> <span class="o">-like</span> <span class="nv">$region_name</span> <span class="o">-and</span> <span class="nv">$_</span><span class="p">.</span><span class="n">provider</span> <span class="o">-like</span> <span class="nv">$provider</span> <span class="p">}</span>  <span class="p">|</span> <span class="nb">select </span><span class="n">_links</span>

<span class="nv">$dataCenterId</span> <span class="p">=</span> <span class="p">(</span><span class="nv">$dataCenter</span><span class="p">.</span><span class="n">_links</span><span class="p">.</span><span class="n">self</span><span class="p">.</span><span class="n">href</span><span class="p">).</span><span class="n">Split</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)[-</span><span class="n">1</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c"># Get a Network ID:</span>

<span class="nv">$network_uri</span> <span class="p">=</span> <span class="nv">$api_endpoint</span> <span class="p">+</span> <span class="s2">"/networks"</span>

<span class="nv">$network_response</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Method</span> <span class="n">Get</span> <span class="n">-Uri</span> <span class="nv">$network_uri</span> <span class="n">-ContentType</span> <span class="s1">'application/json'</span> <span class="n">-Headers</span> <span class="nv">$headers</span>

<span class="nv">$network</span> <span class="p">=</span> <span class="nv">$network_response</span><span class="p">.</span><span class="n">_embedded</span><span class="p">.</span><span class="n">networks</span> <span class="p">|</span> <span class="nb">where </span><span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="n">name</span> <span class="o">-like</span> <span class="nv">$network_name</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">select </span><span class="n">_links</span>

<span class="nv">$networkrId</span> <span class="p">=</span> <span class="p">(</span><span class="nv">$network</span><span class="p">.</span><span class="n">_links</span><span class="p">.</span><span class="n">self</span><span class="p">.</span><span class="n">href</span><span class="p">).</span><span class="n">Split</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)[-</span><span class="n">1</span><span class="p">]</span>
</code></pre></div></li>
<li>Below section of the script uses computername, networkId and datacenterId from above sections to make API call create a NF client and fetch the regitration key.
<div class="highlight"><pre><span></span><code><span class="c"># Create an Endpoint &amp; get reg key</span>
<span class="nv">$endpoint_uri</span> <span class="p">=</span> <span class="nv">$api_endpoint</span> <span class="p">+</span> <span class="s2">"/networks/"</span> <span class="p">+</span> <span class="nv">$networkrId</span> <span class="p">+</span> <span class="s2">"/endpoints"</span>
<span class="nv">$endpoint_payload</span>  <span class="p">=</span> <span class="p">@{</span>
    <span class="n">name</span> <span class="p">=</span> <span class="nv">$endpoint_name</span>
    <span class="n">endpointType</span> <span class="p">=</span> <span class="s2">"CL"</span>
    <span class="n">dataCenterId</span> <span class="p">=</span> <span class="nv">$dataCenterId</span>
<span class="p">}</span>
<span class="nv">$endpoint_json</span> <span class="p">=</span> <span class="nv">$endpoint_payload</span> <span class="p">|</span> <span class="nb">ConvertTo-Json</span>
<span class="nv">$endpoint_response</span>  <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Method</span> <span class="n">Post</span> <span class="n">-Uri</span> <span class="nv">$endpoint_uri</span> <span class="n">-ContentType</span> <span class="s1">'application/json'</span> <span class="n">-Body</span> <span class="nv">$endpoint_json</span> <span class="n">-Headers</span> <span class="nv">$headers</span>
<span class="nv">$endpoint_registration_key</span> <span class="p">=</span> <span class="nv">$endpoint_response</span><span class="p">.</span><span class="n">registrationKey</span>
</code></pre></div></li>
<li>This section will run a registration script silently to register the NF client.
<div class="highlight"><pre><span></span><code><span class="c"># Run registration script</span>
<span class="nb">Start-Process</span> <span class="n">-FilePath</span> <span class="n">C</span><span class="err">:</span><span class="p">\</span><span class="s2">"Program Files"</span><span class="p">\</span><span class="n">DVN</span><span class="p">\</span><span class="n">vtc_app</span><span class="p">\</span><span class="n">nfnreg</span> <span class="nv">$endpoint_registration_key</span>
</code></pre></div></li>
</ol>
</div>
<p>Here is full script <a href="../source-code/NF-pwrshell.ps1">PS script</a></p>
</article>
</div>
</div>
</main>
<!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->
<!-- Application footer -->
<footer class="md-footer">
<!-- Link to previous and/or next page -->
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<!-- Link to previous page -->
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../overview/" rel="prev" title="Overview">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </span>
</div>
</a>
<!-- Link to next page -->
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../../python/overview/" rel="next" title="Overview">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<!-- Further information -->
</footer></div>
</body></html>

<script src="../../../assets/javascripts/application.c33a9706.js"></script>
<script>app.initialize({version:"1.1",url:{base:"../../.."}})</script>

